# Lenia

Sample soure code in C to simulate continuous cellular automata as presented [here](https://chakazul.github.io/lenia.html).

# Code organization
- `python/lenia.py` -> Python reference implementation.
- `Makefile` -> Project build rules.
- `run_lenia.sh` -> sbatch script to acquire resources on the Arnes cluster, build and run the simulator.
- `src/`
    - `main.c` -> Demo main project file.
    - `lenia.cu` -> Implementation of continuous cellular automata.
    - `orbium.c` -> Code for placement of [Orbium creatures](https://ar5iv.labs.arxiv.org/html/2005.03742/assets/fig3a1.png).
    - `gifenc.c` -> Code for generating gif animations; taken from [here](https://github.com/lecram/gifenc).
# How to use
- Login to Arnes cluster
- Clone the project:
```
git clone https://repo.sling.si/dsluga/lenia.git
```
- Change the #SBATCH parameters in `run_lenia.sh` as needed and run:
```
sbatch run_lenia.sh
```

# Challange notes

- When submitting your solution, **DO NOT SUBMIT** the file `main.c`, as it will be ignored. During benchmarking, we will provide the `src/main.c`, which will call the function `evolve_lenia` as it is defined in the header file `lenia.h`.
- You can modify the `Makefile` and add additional files as you see fit, as long as the project compiles. 
- For debugging purposes, you can uncomment the line `//#define GENERATE_GIF` in `lenia.cu` to generate a gif animation from the simulation. Note that when submitting the solution, you should disable gif generation.
- The project already includes the necessary modules and libraries for the parallel implementations using OpenMP, CUDA, and MPI.
- Your implementation of `evolve_lenia` should work for:
    - arbitrary world size (number of rows and columns),
    - arbitrary number of simulation steps,
    - arbitrary number of orbiums placed in random postitions and orientations,
    - fixed convolution kernel size (26x26).
- The function `evolve_lenia` should return the last state of the Lenia world when exiting. We will use it to check your solution for correctness. We will treat the solution as correct if the returned state's cell values match those generated by the code provided in this repository to at least two decimal places. 